<ui:composition template="/menu-catalog.xhtml" xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:c="http://java.sun.com/jsf/core"
	xmlns:f="http://java.sun.com/jsf/facet"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">
	
	<ui:define name="titulo">#{msgs.label_consultarIngressos}</ui:define>
	
	<ui:define name="breadCrumb">
		<p:breadCrumb styleClass="breadCrumb" model="#{consultarIngressosBean.menuModel}" lastItemDisabled="true"></p:breadCrumb>
	</ui:define>
	
	<ui:define name="conteudo">
		<h:form id = "formConsultarIngressos">
			<p:dialog header="Consultar" id="dlg1" widgetVar="dlg1" modal="true" minHeight="40" width="300">
                <br/>
			    <h:outputText value="${consultarIngressosBean.mensagem}" />
			    <br/>
				<p:commandButton style="float: right;" value="OK" 
								 update="formConsultarIngressos" oncomplete="PF('dlg1').hide()"/>
			</p:dialog>
			
			<p:dialog id="excluirIngresso" widgetVar="excluirIngresso" modal="true" header="Excluir" width="175">
				<h:panelGrid columns="1">
					<h:panelGroup>
						<h:outputText value="Deseja mesmo apagar?"/>
					</h:panelGroup>
				</h:panelGrid>
				<h:panelGrid columns="2">
					<h:panelGroup>
	                	<p:commandButton style="float: left;" value="Sim" icon="pi pi-check" 
	                		action="#{consultarIngressosBean.excluir}" oncomplete="PF('dlg1').show()" 
	                		update="formConsultarIngressos" onclick="PF('excluirIngresso').hide()"/>
	                </h:panelGroup>
	                <h:panelGroup>
	        			<p:commandButton style="float: right;" value="NÃ£o" icon="pi pi-times"
	        				onclick="PF('excluirIngresso').hide()" />
	        		</h:panelGroup>
        		</h:panelGrid>
            </p:dialog>
			
			<p:dataTable value="#{consultarIngressosBean.ingressos}" id="ingressos" var="ingresso" rows="10" emptyMessage="#{msgs.msg_ingressos_empty}"
					paginator="true"
					paginatorPosition="top"
	                paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
	                currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords} ingressos">
				<p:column width="7%">
					<c:facet name="header">${msgs.label_ingressos_codigoIngresso}</c:facet>
                		<p:outputLabel style="float: right;" value="#{ingresso.codigoIngresso}"></p:outputLabel>  
                </p:column>
                <p:column width="10%">
					<c:facet name="header">#{msgs.label_sessao_horaSessao}</c:facet>
                    <p:outputLabel value="#{ingresso.sessao.horario.horarioCompleto}"></p:outputLabel> 
                </p:column>
                <p:column width="10%">
					<c:facet name="header">#{msgs.label_sessao_dataSessao}</c:facet>
                    <p:outputLabel value="#{ingresso.sessao.dataFormatada}"></p:outputLabel> 
                </p:column>
                 <p:column>
					<c:facet name="header">#{msgs.label_ingressos_nomePessoa}</c:facet>
                    <p:outputLabel value="#{ingresso.pessoa.nome}"></p:outputLabel> 
                </p:column>
                <p:column>
					<c:facet name="header">#{msgs.label_ingressos_evento}</c:facet>
                    <p:outputLabel value="#{ingresso.sessao.evento.descricao}"></p:outputLabel> 
                </p:column>
                <p:column width="12%">
					<c:facet name="header">#{msgs.label_ingressos_acoes}</c:facet>
                    <p:commandButton style="width: 100%;" value="#{msgs.label_ingressos_button_detalhar}" action="#{consultarIngressosBean.consultar(ingresso)}"></p:commandButton>
                    
 					<p:commandButton value="#{msgs.label_ingressos_button_alterar}" action="#{consultarIngressosBean.alterar(ingresso)}" style= "margin-top:10px; margin-right:10px;width: 50%;"/>
                	<p:commandButton value="#{msgs.label_ingressos_button_excluir}" action="#{consultarIngressosBean.setIngresso(ingresso)}" 
                		onclick="PF('excluirIngresso').show()"/>         
                </p:column>	
			</p:dataTable>       
            
		</h:form>
	</ui:define>
	
</ui:composition>