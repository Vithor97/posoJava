<ui:composition template="/menu-catalog.xhtml" xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:c="http://java.sun.com/jsf/core"
	xmlns:f="http://java.sun.com/jsf/facet"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">
	
	<ui:define name="titulo">#{msgs.label_consultarIngressos}</ui:define>
	
	<ui:define name="breadCrumb">
		<p:breadCrumb styleClass="breadCrumb" model="#{consultarIngressosBean.menuModel}" lastItemDisabled="true"></p:breadCrumb>
	</ui:define>
	
	<ui:define name="conteudo">
		<h:form id = "form">
			<p:dialog header="Consultar" id="dlg1" widgetVar="dlg1" modal="true" minHeight="40" width="300">
                <br/>
			    <h:outputText value="${consultarIngressosBean.mensagem}" />
			    <br/>
				<p:commandButton style="float: right;" value="OK" 
								 onclick="PF('dlg1').hide()"/>
			</p:dialog>
			<p:dataTable value="#{consultarIngressosBean.ingressos}" id="ingressos" var="ingresso" rows="10" emptyMessage="#{msgs.msg_ingressos_empty}"
					paginator="true"
					paginatorPosition="top"
	                paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
	                currentPageReportTemplate="{startRecord} - {endRecord} de {totalRecords} eventos">
				<p:column width="5%">
					<c:facet name="header">${msgs.label_ingressos_codigoIngresso}</c:facet>
                		<p:outputLabel style="float: right;" value="#{ingresso.codigoIngresso}"></p:outputLabel>  
                </p:column>
                <p:column width="10%">
					<c:facet name="header">#{msgs.label_sessao_horaSessao}</c:facet>
                    <p:outputLabel value="#{ingresso.sessao.horario.horarioCompleto}"></p:outputLabel> 
                </p:column>
                <p:column width="10%">
					<c:facet name="header">#{msgs.label_sessao_dataSessao}</c:facet>
                    <p:outputLabel value="#{ingresso.sessao.dataFormatada}"></p:outputLabel> 
                </p:column>
                 <p:column>
					<c:facet name="header">#{msgs.label_ingressos_nomePessoa}</c:facet>
                    <p:outputLabel value="#{ingresso.pessoa.nome}"></p:outputLabel> 
                </p:column>
                <p:column>
					<c:facet name="header">#{msgs.label_ingressos_evento}</c:facet>
                    <p:outputLabel value="#{ingresso.sessao.evento.descricao}"></p:outputLabel> 
                </p:column>
                <p:column width="12%">
					<c:facet name="header">#{msgs.label_ingressos_acoes}</c:facet>
                    <p:commandButton style="width: 100%;" value="#{msgs.label_ingressos_button_consultar}" action="#{listarEventosBean.detalhar(evento)}"></p:commandButton>
                    
 					<p:commandButton value="#{msgs.label_ingressos_button_alterar}" action="#{listarEventosBean.alteracao(evento)}" style= "margin-top:10px; margin-right:10px;width: 50%;"/>
                	<p:commandButton value="#{msgs.label_ingressos_button_excluir}" action="#{listarEventosBean.excluir(evento)}">
                	
                	<p:confirm header="ExlusÃ£o de Evento" message="Deseja apagar?" icon="ui-icon-alert" />
                	</p:commandButton> 
                	           
                </p:column>	
			</p:dataTable>
			<h:panelGrid columns="2">
				<p:outputLabel for="codIngresso" value="${msgs.label_ingressos_codigoIngresso}" />
				<p:inputText id="codIngresso" value="${consultarIngressosBean.ingresso.codigoIngresso}"/>
				<p:commandButton value="${msgs.label_ingressos_button_consultar}" action="${consultarIngressosBean.consultar}" update="form"/>
			</h:panelGrid>
		</h:form>
	</ui:define>
	
</ui:composition>